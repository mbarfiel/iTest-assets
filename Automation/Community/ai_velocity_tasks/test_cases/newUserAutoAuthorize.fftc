<?xml version="1.0"?>
<testCase version="7.2.0.201812200559">
    <general>
        <documentation>Automatically authorize new users and add them to default user group</documentation>
        <notes>This will automatically add users to a default user groups when they login and send a notification to the admins</notes>
        <owner>MBarfield</owner>
        <language>Python</language>
    </general>
    <execution>
        <parameters version="7.2.0.201812200559">
            <parameters escape="true">
                <parameters xmlns:pt="http://www.fnfr.com/schemas/parameterTree">
                    <email pt:description="email for user">spirentito.se@gmail.com</email>
                    <password pt:description="email password" pt:mask="true">OYFutY2DryV1FmnoBotBfA==</password>
                    <groupName pt:description="User group to add new users">demo</groupName>
                    <role pt:description="role used to send emails - e.g. ADMIN, USER">USER</role>
                    <velSuperUser pt:description="User to send system messages">spirent</velSuperUser>
                    <velSuperUserPassword pt:description="User pwd to send system messages" pt:mask="true">Ybd7Az8JCJQJor6ZZIWzzg==</velSuperUserPassword>
                    <userGroupId pt:description="User group to send messages to when new user logs in">1a56c325-2378-4a5a-a2f3-e9153b864b00</userGroupId>
                </parameters>
            </parameters>
        </parameters>
    </execution>
    <procedures>
        <item name="main">
            <steps>
                <item guid="d62cacf1-81c0-4319-8a69-17b714b8610d" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Open sessions</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="fd6dd465-2253-4e11-b381-57a9389ca970" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>set variables</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="83579c4c-02f8-4741-bf94-33532b1a53ea" action="eval" useFieldsInCommand="false">
                    <command>
                        <body>token = velocity(&apos;token&apos;)</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="095da7f0-cc18-4e9e-87fe-3ae586486d88" action="eval" useFieldsInCommand="false">
                    <command>
                        <body>url = velocity(&apos;url&apos;)</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="b7d9fe14-6ded-4f46-aa86-274e3af5ffb7" action="eval" useFieldsInCommand="false">
                    <command>
                        <body>print(url)</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="5b9e9626-1aa9-42b3-b280-c5d7afb19752" action="eval" useFieldsInCommand="false">
                    <command>
                        <body>print(token)</body>
                    </command>
                    <postProcessing>
                        <analysisRules>
                            <item>
                                <extractorInfo extractorType="regex">
                                    <extractorProperties type="com.fnfr.svt.mapping.regex.extractors.RegexExtractorPropertyGroup" useLineMode="true">
                                        <regex>^.*$</regex>
                                        <extractionGroupIndex>0</extractionGroupIndex>
                                    </extractorProperties>
                                </extractorInfo>
                                <processorInfo ruleType="message">
                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                        <message>Get token for REST calls: &quot;{value}&quot;</message>
                                    </ruleProperties>
                                </processorInfo>
                            </item>
                        </analysisRules>
                    </postProcessing>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="5e03c341-3e6f-4fd0-992a-d40c03b9fd9a" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Add new user to user group on first login</body>
                    </command>
                    <nestedSteps>
                        <item guid="1f9f451e-adc9-4f4d-a4ee-7b6742042f58" action="open" session="velocity">
                            <command>
                                <body>project://di_velocity_com/session_profiles/REST_ref_session_profile.ffsp</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.OpenStepPropertyGroup">
                                <stepProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                <sessionProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulSessionProperties" url="[url]/api" url.inherit="false">
                                    <authentication transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.AuthenticationProperties" authenticationType.inherit="false" user.inherit="false" password.masked="true" password="CaK+mWSFs84=" password.inherit="false"/>
                                    <httpHeader inherit="false" transferableToolId="com.fnfr.itest.applications.webservices.restful">
                                        <memberClasses>
                                            <item>com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry</item>
                                        </memberClasses>
                                        <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry" header="Content-Type" header.inherit="false" value="application/json" value.inherit="false"/>
                                        <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry" header="X-Auth-Token" header.inherit="false" value="[token]" value.inherit="false"/>
                                    </httpHeader>
                                </sessionProperties>
                                <sessionClass type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                <sessionVersion type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            </applicationProperties>
                            <emulation emulate="ALWAYS">
                                <behavior>
                                    <structuredData>
&lt;structure xmlns:map=&quot;http://www.fnfr.com/svt/mapping&quot;/&gt;
</structuredData>
                                    <aliases>
                                        <item name="isEmpty">
                                            <queryFormatString>.//isEmpty</queryFormatString>
                                        </item>
                                    </aliases>
                                    <duration>0.7</duration>
                                </behavior>
                            </emulation>
                        </item>
                        <item guid="1bb792cd-95cf-4416-b2c9-ba7878547e69" action="call" useFieldsInCommand="false">
                            <command>
                                <body>getEmailsPerUserRole -role [param(&apos;role&apos;)] -token [token]</body>
                            </command>
                            <postProcessing>
                                <analysisRules>
                                    <item>
                                        <extractorInfo extractorType="regex">
                                            <extractorProperties type="com.fnfr.svt.mapping.regex.extractors.RegexExtractorPropertyGroup" useLineMode="true">
                                                <regex>^.*$</regex>
                                                <extractionGroupIndex>0</extractionGroupIndex>
                                            </extractorProperties>
                                        </extractorInfo>
                                        <processorInfo ruleType="message">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                <message>Admin emails for notfication: &quot;{value}&quot;</message>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                </analysisRules>
                                <storeResponseAt>emailList</storeResponseAt>
                                <storeResponseText>true</storeResponseText>
                            </postProcessing>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <emulation>
                                <behavior>
                                    <response>les.daniels@spirent.com;mike.barfield@spirent.com</response>
                                    <responseType>text</responseType>
                                    <structuredData>
&lt;structure xmlns:map=&quot;http://www.fnfr.com/svt/mapping&quot;&gt;
    &lt;isEmpty&gt;false&lt;/isEmpty&gt;
&lt;/structure&gt;
</structuredData>
                                    <aliases>
                                        <item name="isEmpty">
                                            <queryFormatString>.//isEmpty</queryFormatString>
                                        </item>
                                    </aliases>
                                    <duration>2.8</duration>
                                </behavior>
                            </emulation>
                        </item>
                        <item guid="190d7a40-1d0e-44dc-963c-3fdc2721ec34" action="GET" session="velocity" estimatedStepExecutionTime="1.14">
                            <command>
                                <body>/velocity/api/user/v8/profiles?role=USER&amp;limit=1&amp;sortBy=created&amp;sortOrder=desc</body>
                            </command>
                            <postProcessing>
                                <analysisRules>
                                    <item>
                                        <extractorInfo extractorType="query">
                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                <query>mapped/Json/profiles/item/id</query>
                                            </extractorProperties>
                                        </extractorInfo>
                                        <processorInfo ruleType="store">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                <storageLocation>userId</storageLocation>
                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                    <item>
                                        <extractorInfo extractorType="query">
                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                <query>mapped/Json/profiles/item/name</query>
                                            </extractorProperties>
                                        </extractorInfo>
                                        <processorInfo ruleType="store">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                <storageLocation>userName</storageLocation>
                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                    <item>
                                        <extractorInfo extractorType="none">
                                            <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                        </extractorInfo>
                                        <processorInfo ruleType="message">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                <message>New User and User ID added to the system: [userName], [userId]</message>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                </analysisRules>
                            </postProcessing>
                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/user/v8/profiles?role=USER&amp;limit=1&amp;sortBy=created&amp;sortOrder=desc" action.inherit="false">
                                <authentication transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.AuthenticationProperties" acceptAllCertificates="true" acceptAllCertificates.inherit="false"/>
                            </applicationProperties>
                            <emulation>
                                <behavior>
                                    <response>{&quot;total&quot;:11,&quot;offset&quot;:0,&quot;count&quot;:1,&quot;profiles&quot;:[{&quot;id&quot;:&quot;0593637f-194a-482d-ae6c-309925d7e62c&quot;,&quot;name&quot;:&quot;Parenteau, Fred&quot;,&quot;description&quot;:&quot;&quot;,&quot;autosetTimeZone&quot;:true,&quot;timeZoneId&quot;:null,&quot;role&quot;:&quot;USER&quot;,&quot;email&quot;:null,&quot;receivesEmailNotifications&quot;:false,&quot;created&quot;:1536253087110,&quot;lastModifierId&quot;:null,&quot;lastModified&quot;:1536253087110,&quot;prefersExternalApplicationToHandleConsoleUrls&quot;:false,&quot;receivesDailyReports&quot;:false,&quot;receivesOwnReservationInvitations&quot;:false,&quot;autoApproveFrom&quot;:[],&quot;groups&quot;:[],&quot;login&quot;:&quot;fparenteau&quot;,&quot;homePage&quot;:null,&quot;features&quot;:[],&quot;defaultReportTemplateId&quot;:null,&quot;administeredDeviceGroups&quot;:[],&quot;timeZoneOffset&quot;:-25200000,&quot;isDisabled&quot;:false,&quot;userStatus&quot;:&quot;IDLE&quot;}]}</response>
                                    <responseType>text</responseType>
                                    <structuredData>
&lt;structure xmlns:map=&quot;http://www.fnfr.com/svt/mapping&quot;&gt;
    &lt;statusCode value=&quot;200&quot;/&gt;
    &lt;requestHTTPHeaders map:nodetype=&quot;token&quot;&gt;
        &lt;Content_Type map:nodetype=&quot;token&quot;&gt;application/json&lt;/Content_Type&gt;
        &lt;X_Auth_Token map:nodetype=&quot;token&quot;&gt;eyJwYWNrZXQiOiAie1widXNlcl9uYW1lXCI6IFwiQmFyZmllbGQsIE1pa2VcIiwgXCJzdGFydF90aW1lXCI6IDE1MzYzNTExNzAsIFwiaWRcIjogXCJtYmFyZmllbGRcIiwgXCJleHBpcmF0aW9uXCI6IDE1MzY0Mzg3NzAsIFwiZG9tYWluXCI6IFwibGRhcFwifSIsICJzaWduYXR1cmUiOiAiNjQyNWYyNWZhZjYzYTZiMzIzZGVmMmRjMDA2Y2ZhY2RiMjJjZTcxMjJjOTZjYTcwYWQ0YjE1ZWQ3YTMzMDYwMzgyYWM2MTBhYjBhNzYxMDRhY2FkMmQ4MjFlYjMxYzczNWI2OTE2MGYyY2ZkZGFlODdiMzkxNTI3MmE2MzcxZmY2NzIzMzdiMjI5NWZiN2JlYjcyNjVjMjM5ZDUxNzU3MzljODE5NmNlMDk0M2Y0N2IzZjEwYzEyMzNhYTI4NDM2OTMyOTE4ZGExZTk1M2MwMDQ4MDFhNGRlYmNmYWQxYzY5NjI3NmQ4MjhiZGY3NzAwMmE1YWI4OTNkMDgxOTMxMDY2MTFhZmQwNjM5YTdkZmE3MjI2ZGJjN2VjYWE4NWMwNTM1OWI4MWYwOGI0MjdkOThlYjIwYTViMTI5ZDViYTg3NWUyMmVhMTY5YjA4M2U0ZmU1ODc2OTQyM2RhZDdhZDQxOTM1NDQwZjM0NDk1MTk4YzVlMjA1YzZiYjk5OTcyNzcyMmJjZjcyYjVkMDg5OWNlYjE4NzEzMDliNjBlNTlhNGU4N2RmOGIyZTRmMmY0NjRjYzc5ZWU3MDg4MDRlYTQ2NmM1MmNiNjVkMTRhYzZlOGZhM2FkMjUwMDczYWYwODZhODM4ZDI3M2M4NmU1OTM3NTFmZjk1ZDgxOTNkNjEifQ==&lt;/X_Auth_Token&gt;
    &lt;/requestHTTPHeaders&gt;
    &lt;requestRawText map:nodetype=&quot;token&quot;/&gt;
    &lt;responseHTTPHeaders map:nodetype=&quot;token&quot;&gt;
        &lt;Server map:nodetype=&quot;token&quot;&gt;nginx/1.10.3 (Ubuntu)&lt;/Server&gt;
        &lt;Cache_Control map:nodetype=&quot;token&quot;&gt;no-cache, no-store, must-revalidate&lt;/Cache_Control&gt;
        &lt;Cache_Control map:nodetype=&quot;token&quot;&gt;no-cache&lt;/Cache_Control&gt;
        &lt;Connection map:nodetype=&quot;token&quot;&gt;keep-alive&lt;/Connection&gt;
        &lt;Expires map:nodetype=&quot;token&quot;&gt;0&lt;/Expires&gt;
        &lt;Pragma map:nodetype=&quot;token&quot;&gt;no-cache&lt;/Pragma&gt;
        &lt;Content_Length map:nodetype=&quot;token&quot;&gt;648&lt;/Content_Length&gt;
        &lt;Date map:nodetype=&quot;token&quot;&gt;Fri, 07 Sep 2018 20:33:44 GMT&lt;/Date&gt;
        &lt;Content_Type map:nodetype=&quot;token&quot;&gt;application/json&lt;/Content_Type&gt;
        &lt;X_Powered_By map:nodetype=&quot;token&quot;&gt;Undertow/1&lt;/X_Powered_By&gt;
    &lt;/responseHTTPHeaders&gt;
    &lt;responseRawText map:nodetype=&quot;token&quot;&gt;{&amp;quot;total&amp;quot;:11,&amp;quot;offset&amp;quot;:0,&amp;quot;count&amp;quot;:1,&amp;quot;profiles&amp;quot;:[{&amp;quot;id&amp;quot;:&amp;quot;0593637f-194a-482d-ae6c-309925d7e62c&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;Parenteau, Fred&amp;quot;,&amp;quot;description&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;autosetTimeZone&amp;quot;:true,&amp;quot;timeZoneId&amp;quot;:null,&amp;quot;role&amp;quot;:&amp;quot;USER&amp;quot;,&amp;quot;email&amp;quot;:null,&amp;quot;receivesEmailNotifications&amp;quot;:false,&amp;quot;created&amp;quot;:1536253087110,&amp;quot;lastModifierId&amp;quot;:null,&amp;quot;lastModified&amp;quot;:1536253087110,&amp;quot;prefersExternalApplicationToHandleConsoleUrls&amp;quot;:false,&amp;quot;receivesDailyReports&amp;quot;:false,&amp;quot;receivesOwnReservationInvitations&amp;quot;:false,&amp;quot;autoApproveFrom&amp;quot;:[],&amp;quot;groups&amp;quot;:[],&amp;quot;login&amp;quot;:&amp;quot;fparenteau&amp;quot;,&amp;quot;homePage&amp;quot;:null,&amp;quot;features&amp;quot;:[],&amp;quot;defaultReportTemplateId&amp;quot;:null,&amp;quot;administeredDeviceGroups&amp;quot;:[],&amp;quot;timeZoneOffset&amp;quot;:-25200000,&amp;quot;isDisabled&amp;quot;:false,&amp;quot;userStatus&amp;quot;:&amp;quot;IDLE&amp;quot;}]}&lt;/responseRawText&gt;
&lt;/structure&gt;
</structuredData>
                                    <aliases>
                                        <item name="isEmpty">
                                            <queryFormatString>.//isEmpty</queryFormatString>
                                        </item>
                                    </aliases>
                                    <duration>0.6</duration>
                                </behavior>
                            </emulation>
                        </item>
                        <item guid="f345afce-ae1a-47fd-b9ee-61f26afa9796" action="comment" useFieldsInCommand="false">
                            <command>
                                <body>Get user group from paramters</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="0012091c-dd75-4ff4-a5b7-f4b22f7e9673" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>userGroup = param(&apos;groupName&apos;)</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="d0ea2371-bc90-4c6a-b683-727a08e615f4" action="comment" useFieldsInCommand="false">
                            <command>
                                <body>default workshop name is hardcoded and needs fixed later</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="47fa610b-6c1f-4ac6-9599-e3defddff79b" action="GET" session="velocity" estimatedStepExecutionTime="0.636">
                            <command>
                                <body>/velocity/api/user/v8/groups</body>
                            </command>
                            <postProcessing>
                                <analysisRules>
                                    <item>
                                        <extractorInfo extractorType="query">
                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                <query>mapped/Json/userGroups/item[name = &apos;demo&apos;]/id</query>
                                            </extractorProperties>
                                        </extractorInfo>
                                        <processorInfo ruleType="store">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                <storageLocation>userGroupId</storageLocation>
                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                    <item>
                                        <extractorInfo extractorType="query">
                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                <query sub="true">mapped/Json/userGroups/item\\[name =&apos;[userGroup]&apos;]/id</query>
                                            </extractorProperties>
                                        </extractorInfo>
                                        <processorInfo ruleType="store">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                <storageLocation>userGroupId</storageLocation>
                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                            </ruleProperties>
                                        </processorInfo>
                                        <skip>true</skip>
                                    </item>
                                    <item>
                                        <extractorInfo extractorType="none">
                                            <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                        </extractorInfo>
                                        <processorInfo ruleType="message">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                <message>User Group ID : [userGroupId]</message>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                </analysisRules>
                                <storeResponseAt>groups</storeResponseAt>
                            </postProcessing>
                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/user/v8/groups" action.inherit="false">
                                <authentication transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.AuthenticationProperties" acceptAllCertificates="true" acceptAllCertificates.inherit="false"/>
                            </applicationProperties>
                            <emulation>
                                <behavior>
                                    <response>{&quot;userGroups&quot;:[{&quot;id&quot;:null,&quot;name&quot;:&quot;Ungrouped&quot;,&quot;userCount&quot;:2,&quot;weeklyQuota&quot;:null,&quot;monthlyQuota&quot;:null,&quot;quarterlyQuota&quot;:null,&quot;yearlyQuota&quot;:null,&quot;isCheckinRequired&quot;:false,&quot;approvers&quot;:[],&quot;technicianManagerId&quot;:null,&quot;isEscalationManagers&quot;:false,&quot;hasTopologiesMaintenanceAccess&quot;:true,&quot;creatorId&quot;:null,&quot;created&quot;:null,&quot;requestFormId&quot;:null},{&quot;id&quot;:&quot;d015d3c7-374d-407c-b628-aeaef84b17b5&quot;,&quot;name&quot;:&quot;KVM-Workshop&quot;,&quot;userCount&quot;:9,&quot;weeklyQuota&quot;:120,&quot;monthlyQuota&quot;:240,&quot;quarterlyQuota&quot;:null,&quot;yearlyQuota&quot;:null,&quot;isCheckinRequired&quot;:false,&quot;approvers&quot;:[],&quot;technicianManagerId&quot;:null,&quot;isEscalationManagers&quot;:false,&quot;hasTopologiesMaintenanceAccess&quot;:false,&quot;creatorId&quot;:&quot;43aabccc-ef9d-425c-a774-dbc050bc6ca4&quot;,&quot;created&quot;:1532359913225,&quot;requestFormId&quot;:null}],&quot;total&quot;:2,&quot;offset&quot;:0,&quot;count&quot;:2}</response>
                                    <responseType>text</responseType>
                                    <structuredData>
&lt;structure xmlns:map=&quot;http://www.fnfr.com/svt/mapping&quot;&gt;
    &lt;statusCode value=&quot;200&quot;/&gt;
    &lt;requestHTTPHeaders map:nodetype=&quot;token&quot;&gt;
        &lt;Content_Type map:nodetype=&quot;token&quot;&gt;application/json&lt;/Content_Type&gt;
        &lt;X_Auth_Token map:nodetype=&quot;token&quot;&gt;eyJwYWNrZXQiOiAie1widXNlcl9uYW1lXCI6IFwiQmFyZmllbGQsIE1pa2VcIiwgXCJzdGFydF90aW1lXCI6IDE1MzYzNTExNzAsIFwiaWRcIjogXCJtYmFyZmllbGRcIiwgXCJleHBpcmF0aW9uXCI6IDE1MzY0Mzg3NzAsIFwiZG9tYWluXCI6IFwibGRhcFwifSIsICJzaWduYXR1cmUiOiAiNjQyNWYyNWZhZjYzYTZiMzIzZGVmMmRjMDA2Y2ZhY2RiMjJjZTcxMjJjOTZjYTcwYWQ0YjE1ZWQ3YTMzMDYwMzgyYWM2MTBhYjBhNzYxMDRhY2FkMmQ4MjFlYjMxYzczNWI2OTE2MGYyY2ZkZGFlODdiMzkxNTI3MmE2MzcxZmY2NzIzMzdiMjI5NWZiN2JlYjcyNjVjMjM5ZDUxNzU3MzljODE5NmNlMDk0M2Y0N2IzZjEwYzEyMzNhYTI4NDM2OTMyOTE4ZGExZTk1M2MwMDQ4MDFhNGRlYmNmYWQxYzY5NjI3NmQ4MjhiZGY3NzAwMmE1YWI4OTNkMDgxOTMxMDY2MTFhZmQwNjM5YTdkZmE3MjI2ZGJjN2VjYWE4NWMwNTM1OWI4MWYwOGI0MjdkOThlYjIwYTViMTI5ZDViYTg3NWUyMmVhMTY5YjA4M2U0ZmU1ODc2OTQyM2RhZDdhZDQxOTM1NDQwZjM0NDk1MTk4YzVlMjA1YzZiYjk5OTcyNzcyMmJjZjcyYjVkMDg5OWNlYjE4NzEzMDliNjBlNTlhNGU4N2RmOGIyZTRmMmY0NjRjYzc5ZWU3MDg4MDRlYTQ2NmM1MmNiNjVkMTRhYzZlOGZhM2FkMjUwMDczYWYwODZhODM4ZDI3M2M4NmU1OTM3NTFmZjk1ZDgxOTNkNjEifQ==&lt;/X_Auth_Token&gt;
    &lt;/requestHTTPHeaders&gt;
    &lt;requestRawText map:nodetype=&quot;token&quot;/&gt;
    &lt;responseHTTPHeaders map:nodetype=&quot;token&quot;&gt;
        &lt;Server map:nodetype=&quot;token&quot;&gt;nginx/1.10.3 (Ubuntu)&lt;/Server&gt;
        &lt;Cache_Control map:nodetype=&quot;token&quot;&gt;no-cache, no-store, must-revalidate&lt;/Cache_Control&gt;
        &lt;Cache_Control map:nodetype=&quot;token&quot;&gt;no-cache&lt;/Cache_Control&gt;
        &lt;Connection map:nodetype=&quot;token&quot;&gt;keep-alive&lt;/Connection&gt;
        &lt;Expires map:nodetype=&quot;token&quot;&gt;0&lt;/Expires&gt;
        &lt;Pragma map:nodetype=&quot;token&quot;&gt;no-cache&lt;/Pragma&gt;
        &lt;Content_Length map:nodetype=&quot;token&quot;&gt;752&lt;/Content_Length&gt;
        &lt;Date map:nodetype=&quot;token&quot;&gt;Fri, 07 Sep 2018 20:33:45 GMT&lt;/Date&gt;
        &lt;Content_Type map:nodetype=&quot;token&quot;&gt;application/json&lt;/Content_Type&gt;
        &lt;X_Powered_By map:nodetype=&quot;token&quot;&gt;Undertow/1&lt;/X_Powered_By&gt;
    &lt;/responseHTTPHeaders&gt;
    &lt;responseRawText map:nodetype=&quot;token&quot;&gt;{&amp;quot;userGroups&amp;quot;:[{&amp;quot;id&amp;quot;:null,&amp;quot;name&amp;quot;:&amp;quot;Ungrouped&amp;quot;,&amp;quot;userCount&amp;quot;:2,&amp;quot;weeklyQuota&amp;quot;:null,&amp;quot;monthlyQuota&amp;quot;:null,&amp;quot;quarterlyQuota&amp;quot;:null,&amp;quot;yearlyQuota&amp;quot;:null,&amp;quot;isCheckinRequired&amp;quot;:false,&amp;quot;approvers&amp;quot;:[],&amp;quot;technicianManagerId&amp;quot;:null,&amp;quot;isEscalationManagers&amp;quot;:false,&amp;quot;hasTopologiesMaintenanceAccess&amp;quot;:true,&amp;quot;creatorId&amp;quot;:null,&amp;quot;created&amp;quot;:null,&amp;quot;requestFormId&amp;quot;:null},{&amp;quot;id&amp;quot;:&amp;quot;d015d3c7-374d-407c-b628-aeaef84b17b5&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;KVM-Workshop&amp;quot;,&amp;quot;userCount&amp;quot;:9,&amp;quot;weeklyQuota&amp;quot;:120,&amp;quot;monthlyQuota&amp;quot;:240,&amp;quot;quarterlyQuota&amp;quot;:null,&amp;quot;yearlyQuota&amp;quot;:null,&amp;quot;isCheckinRequired&amp;quot;:false,&amp;quot;approvers&amp;quot;:[],&amp;quot;technicianManagerId&amp;quot;:null,&amp;quot;isEscalationManagers&amp;quot;:false,&amp;quot;hasTopologiesMaintenanceAccess&amp;quot;:false,&amp;quot;creatorId&amp;quot;:&amp;quot;43aabccc-ef9d-425c-a774-dbc050bc6ca4&amp;quot;,&amp;quot;created&amp;quot;:1532359913225,&amp;quot;requestFormId&amp;quot;:null}],&amp;quot;total&amp;quot;:2,&amp;quot;offset&amp;quot;:0,&amp;quot;count&amp;quot;:2}&lt;/responseRawText&gt;
&lt;/structure&gt;
</structuredData>
                                    <aliases>
                                        <item name="isEmpty">
                                            <queryFormatString>.//isEmpty</queryFormatString>
                                        </item>
                                    </aliases>
                                    <duration>0.6</duration>
                                </behavior>
                            </emulation>
                        </item>
                        <item guid="edc80d3b-55ab-40c4-9a37-00f0d12054a8" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>print(userGroupId)</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="b5e661a2-2252-442a-bf80-75c0f0f3d474" action="POST" session="velocity" estimatedStepExecutionTime="0.589">
                            <command>
                                <body>/velocity/api/user/v8/group/[userGroupId]/user/[userId]</body>
                            </command>
                            <postProcessing>
                                <analysisRules>
                                    <item>
                                        <extractorInfo extractorType="query">
                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                <query>statusCode/@value</query>
                                            </extractorProperties>
                                        </extractorInfo>
                                        <processorInfo ruleType="assert">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                <expression>int(value) == 200</expression>
                                                <actionsWhenTrue>
                                                    <item actionId="DeclareExecutionIssue">
                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                            <message>POST status code, expected code 200, actual code: [value]</message>
                                                        </actionProperties>
                                                    </item>
                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                    </item>
                                                </actionsWhenTrue>
                                                <actionsWhenFalse>
                                                    <item actionId="DeclareExecutionIssue">
                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                            <message>POST status code, expected code 200, actual code: [value]</message>
                                                        </actionProperties>
                                                    </item>
                                                    <item actionId="FailTest">
                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                    </item>
                                                </actionsWhenFalse>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                </analysisRules>
                            </postProcessing>
                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="POST" httpMethod.inherit="false" action="/velocity/api/user/v8/group/[userGroupId]/user/[userId]" action.inherit="false">
                                <authentication transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.AuthenticationProperties" acceptAllCertificates="true" acceptAllCertificates.inherit="false"/>
                            </applicationProperties>
                            <emulation>
                                <behavior>
                                    <response>{&quot;status&quot;:404,&quot;errorId&quot;:&quot;ENDPOINT_NOT_FOUND&quot;,&quot;message&quot;:&quot;Specified URL path does not refer to any resource&quot;,&quot;moreInfo&quot;:null}</response>
                                    <responseType>text</responseType>
                                    <structuredData>
&lt;structure xmlns:map=&quot;http://www.fnfr.com/svt/mapping&quot;&gt;
    &lt;statusCode value=&quot;404&quot;/&gt;
    &lt;requestHTTPHeaders map:nodetype=&quot;token&quot;&gt;
        &lt;Content_Type map:nodetype=&quot;token&quot;&gt;application/json&lt;/Content_Type&gt;
        &lt;X_Auth_Token map:nodetype=&quot;token&quot;&gt;eyJwYWNrZXQiOiAie1widXNlcl9uYW1lXCI6IFwiQmFyZmllbGQsIE1pa2VcIiwgXCJzdGFydF90aW1lXCI6IDE1MzYzNTExNzAsIFwiaWRcIjogXCJtYmFyZmllbGRcIiwgXCJleHBpcmF0aW9uXCI6IDE1MzY0Mzg3NzAsIFwiZG9tYWluXCI6IFwibGRhcFwifSIsICJzaWduYXR1cmUiOiAiNjQyNWYyNWZhZjYzYTZiMzIzZGVmMmRjMDA2Y2ZhY2RiMjJjZTcxMjJjOTZjYTcwYWQ0YjE1ZWQ3YTMzMDYwMzgyYWM2MTBhYjBhNzYxMDRhY2FkMmQ4MjFlYjMxYzczNWI2OTE2MGYyY2ZkZGFlODdiMzkxNTI3MmE2MzcxZmY2NzIzMzdiMjI5NWZiN2JlYjcyNjVjMjM5ZDUxNzU3MzljODE5NmNlMDk0M2Y0N2IzZjEwYzEyMzNhYTI4NDM2OTMyOTE4ZGExZTk1M2MwMDQ4MDFhNGRlYmNmYWQxYzY5NjI3NmQ4MjhiZGY3NzAwMmE1YWI4OTNkMDgxOTMxMDY2MTFhZmQwNjM5YTdkZmE3MjI2ZGJjN2VjYWE4NWMwNTM1OWI4MWYwOGI0MjdkOThlYjIwYTViMTI5ZDViYTg3NWUyMmVhMTY5YjA4M2U0ZmU1ODc2OTQyM2RhZDdhZDQxOTM1NDQwZjM0NDk1MTk4YzVlMjA1YzZiYjk5OTcyNzcyMmJjZjcyYjVkMDg5OWNlYjE4NzEzMDliNjBlNTlhNGU4N2RmOGIyZTRmMmY0NjRjYzc5ZWU3MDg4MDRlYTQ2NmM1MmNiNjVkMTRhYzZlOGZhM2FkMjUwMDczYWYwODZhODM4ZDI3M2M4NmU1OTM3NTFmZjk1ZDgxOTNkNjEifQ==&lt;/X_Auth_Token&gt;
    &lt;/requestHTTPHeaders&gt;
    &lt;requestRawText map:nodetype=&quot;token&quot;/&gt;
    &lt;responseHTTPHeaders map:nodetype=&quot;token&quot;&gt;
        &lt;Transfer_Encoding map:nodetype=&quot;token&quot;&gt;chunked&lt;/Transfer_Encoding&gt;
        &lt;Server map:nodetype=&quot;token&quot;&gt;nginx/1.10.3 (Ubuntu)&lt;/Server&gt;
        &lt;Cache_Control map:nodetype=&quot;token&quot;&gt;no-cache, no-store, must-revalidate&lt;/Cache_Control&gt;
        &lt;Connection map:nodetype=&quot;token&quot;&gt;keep-alive&lt;/Connection&gt;
        &lt;Expires map:nodetype=&quot;token&quot;&gt;0&lt;/Expires&gt;
        &lt;Pragma map:nodetype=&quot;token&quot;&gt;no-cache&lt;/Pragma&gt;
        &lt;Date map:nodetype=&quot;token&quot;&gt;Fri, 07 Sep 2018 20:33:47 GMT&lt;/Date&gt;
        &lt;Content_Type map:nodetype=&quot;token&quot;&gt;application/json&lt;/Content_Type&gt;
        &lt;X_Powered_By map:nodetype=&quot;token&quot;&gt;Undertow/1&lt;/X_Powered_By&gt;
    &lt;/responseHTTPHeaders&gt;
    &lt;responseRawText map:nodetype=&quot;token&quot;&gt;{&amp;quot;status&amp;quot;:404,&amp;quot;errorId&amp;quot;:&amp;quot;ENDPOINT_NOT_FOUND&amp;quot;,&amp;quot;message&amp;quot;:&amp;quot;Specified URL path does not refer to any resource&amp;quot;,&amp;quot;moreInfo&amp;quot;:null}&lt;/responseRawText&gt;
&lt;/structure&gt;
</structuredData>
                                    <aliases>
                                        <item name="isEmpty">
                                            <queryFormatString>.//isEmpty</queryFormatString>
                                        </item>
                                    </aliases>
                                    <duration>0.7</duration>
                                </behavior>
                            </emulation>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="7db7cae2-658b-4ee5-9f6e-5f25b496bd2b" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Send email to admins about new user</body>
                    </command>
                    <nestedSteps>
                        <item guid="4869b18c-14c5-44d8-b7ce-fc833e2ba2a4" action="open" session="email" skip="true">
                            <command>
                                <body>project://ui_mail_com/referenceSessionProfile/mail.ffsp</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.OpenStepPropertyGroup">
                                <stepProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                <sessionProperties type="com.fnfr.svt.applications.mail.MailSessionProperties">
                                    <smtpUser inherit="false" sub="true">[param(&apos;email&apos;)]</smtpUser>
                                    <smtpPassword inherit="false" sub="true" masked="true">4RvNHVItEyvq2ADc2RE8I4rR7ZGVWJpH</smtpPassword>
                                    <from inherit="false">noreply.velocity@gmail.com</from>
                                    <sessionbuilderInitializeAction type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </sessionProperties>
                                <sessionClass type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                <sessionVersion type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            </applicationProperties>
                            <emulation emulate="ALWAYS">
                                <behavior>
                                    <responseType>text</responseType>
                                    <structuredData>
&lt;structure xmlns:map=&quot;http://www.fnfr.com/svt/mapping&quot;&gt;
    &lt;isEmpty&gt;true&lt;/isEmpty&gt;
&lt;/structure&gt;
</structuredData>
                                    <aliases>
                                        <item name="isEmpty">
                                            <queryFormatString>.//isEmpty</queryFormatString>
                                        </item>
                                    </aliases>
                                    <duration>0.3</duration>
                                </behavior>
                            </emulation>
                        </item>
                        <item guid="a9a3d569-e559-4dbb-9e38-700c4756a7e1" action="call" skip="true" useFieldsInCommand="false">
                            <command>
                                <body>sendNotification -emailAddress [emailList] -users [userName]</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <emulation>
                                <behavior>
                                    <responseType>text</responseType>
                                    <structuredData>
&lt;structure xmlns:map=&quot;http://www.fnfr.com/svt/mapping&quot;&gt;
    &lt;isEmpty&gt;true&lt;/isEmpty&gt;
&lt;/structure&gt;
</structuredData>
                                    <aliases>
                                        <item name="isEmpty">
                                            <queryFormatString>.//isEmpty</queryFormatString>
                                        </item>
                                    </aliases>
                                    <duration>1.5</duration>
                                </behavior>
                            </emulation>
                        </item>
                        <item guid="c727dd5c-4dc6-48cf-8e9a-1590c70295eb" action="close" session="email" skip="true">
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <emulation>
                                <behavior>
                                    <responseType>text</responseType>
                                    <structuredData>
&lt;structure xmlns:map=&quot;http://www.fnfr.com/svt/mapping&quot;&gt;
    &lt;isEmpty&gt;true&lt;/isEmpty&gt;
&lt;/structure&gt;
</structuredData>
                                    <aliases>
                                        <item name="isEmpty">
                                            <queryFormatString>.//isEmpty</queryFormatString>
                                        </item>
                                    </aliases>
                                    <duration>0.3</duration>
                                </behavior>
                            </emulation>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="b87d5349-8215-4240-bc85-294b0b17b401" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Send system message</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="3c035035-4da2-44c6-a97a-5bc8599ae3e7" action="call" useFieldsInCommand="false">
                    <command>
                        <body>sendSystemNotification -users [userName] -token [token] -userGroupId param(&apos;userGroupId&apos;)</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
            </steps>
        </item>
        <item name="getEmailsPerUserRole">
            <description>Get velocity emails per user roles</description>
            <steps>
                <item guid="6ff8c411-bad4-4e33-a4b5-c5b9b070b013" action="GET" session="velocity" estimatedStepExecutionTime="0.79">
                    <command>
                        <body>/velocity/api/user/v8/profiles?filter=role::[role]|role::SUPER_ADMIN</body>
                    </command>
                    <postProcessing>
                        <analysisRules>
                            <item>
                                <extractorInfo extractorType="query">
                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                        <query>.//email</query>
                                    </extractorProperties>
                                </extractorInfo>
                                <processorInfo ruleType="store">
                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                        <storageLocation>emails</storageLocation>
                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                    </ruleProperties>
                                </processorInfo>
                            </item>
                        </analysisRules>
                    </postProcessing>
                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/user/v8/profiles?filter=role::[role]|role::SUPER_ADMIN" action.inherit="false">
                        <authentication transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.AuthenticationProperties" acceptAllCertificates="true" acceptAllCertificates.inherit="false"/>
                    </applicationProperties>
                    <emulation>
                        <behavior>
                            <response>{&quot;total&quot;:4,&quot;offset&quot;:0,&quot;count&quot;:4,&quot;profiles&quot;:[{&quot;id&quot;:&quot;43aabccc-ef9d-425c-a774-dbc050bc6ca4&quot;,&quot;name&quot;:&quot;Daniels, Les&quot;,&quot;description&quot;:&quot;&quot;,&quot;autosetTimeZone&quot;:true,&quot;timeZoneId&quot;:null,&quot;role&quot;:&quot;SUPER_ADMIN&quot;,&quot;email&quot;:&quot;les.daniels@spirent.com&quot;,&quot;receivesEmailNotifications&quot;:true,&quot;created&quot;:1532114571103,&quot;lastModifierId&quot;:null,&quot;lastModified&quot;:1532976915673,&quot;prefersExternalApplicationToHandleConsoleUrls&quot;:false,&quot;receivesDailyReports&quot;:true,&quot;receivesOwnReservationInvitations&quot;:false,&quot;autoApproveFrom&quot;:[],&quot;groups&quot;:[{&quot;id&quot;:&quot;d015d3c7-374d-407c-b628-aeaef84b17b5&quot;}],&quot;login&quot;:&quot;ldaniels&quot;,&quot;homePage&quot;:null,&quot;features&quot;:[],&quot;defaultReportTemplateId&quot;:null,&quot;administeredDeviceGroups&quot;:[],&quot;timeZoneOffset&quot;:-25200000,&quot;isDisabled&quot;:false,&quot;userStatus&quot;:&quot;IDLE&quot;},{&quot;id&quot;:&quot;8dc3409e-901e-4a60-8701-985b1a433dfe&quot;,&quot;name&quot;:&quot;Efremov, Daniil&quot;,&quot;description&quot;:&quot;&quot;,&quot;autosetTimeZone&quot;:true,&quot;timeZoneId&quot;:null,&quot;role&quot;:&quot;ADMIN&quot;,&quot;email&quot;:null,&quot;receivesEmailNotifications&quot;:false,&quot;created&quot;:1533013661921,&quot;lastModifierId&quot;:null,&quot;lastModified&quot;:1533035108405,&quot;prefersExternalApplicationToHandleConsoleUrls&quot;:false,&quot;receivesDailyReports&quot;:false,&quot;receivesOwnReservationInvitations&quot;:false,&quot;autoApproveFrom&quot;:[],&quot;groups&quot;:[{&quot;id&quot;:&quot;d015d3c7-374d-407c-b628-aeaef84b17b5&quot;}],&quot;login&quot;:&quot;defremov&quot;,&quot;homePage&quot;:null,&quot;features&quot;:[],&quot;defaultReportTemplateId&quot;:null,&quot;administeredDeviceGroups&quot;:[],&quot;timeZoneOffset&quot;:-25200000,&quot;isDisabled&quot;:false,&quot;userStatus&quot;:&quot;IDLE&quot;},{&quot;id&quot;:&quot;50946a4f-78f8-4011-96ad-3c82eb05b781&quot;,&quot;name&quot;:&quot;mbarfield&quot;,&quot;description&quot;:&quot;&quot;,&quot;autosetTimeZone&quot;:true,&quot;timeZoneId&quot;:null,&quot;role&quot;:&quot;ADMIN&quot;,&quot;email&quot;:&quot;mike.barfield@spirent.com&quot;,&quot;receivesEmailNotifications&quot;:true,&quot;created&quot;:1532019390871,&quot;lastModifierId&quot;:null,&quot;lastModified&quot;:1536351731501,&quot;prefersExternalApplicationToHandleConsoleUrls&quot;:false,&quot;receivesDailyReports&quot;:true,&quot;receivesOwnReservationInvitations&quot;:false,&quot;autoApproveFrom&quot;:[],&quot;groups&quot;:[{&quot;id&quot;:&quot;d015d3c7-374d-407c-b628-aeaef84b17b5&quot;}],&quot;login&quot;:&quot;mbarfield&quot;,&quot;homePage&quot;:null,&quot;features&quot;:[],&quot;defaultReportTemplateId&quot;:&quot;4304cb5a-8a10-4731-ac1c-6d092bffac45&quot;,&quot;administeredDeviceGroups&quot;:[],&quot;timeZoneOffset&quot;:-25200000,&quot;isDisabled&quot;:false,&quot;userStatus&quot;:&quot;ACTIVE&quot;},{&quot;id&quot;:&quot;01a943d3-817e-4048-ab18-75d59ccf505f&quot;,&quot;name&quot;:&quot;Tech Support&quot;,&quot;description&quot;:&quot;&quot;,&quot;autosetTimeZone&quot;:true,&quot;timeZoneId&quot;:null,&quot;role&quot;:&quot;ADMIN&quot;,&quot;email&quot;:null,&quot;receivesEmailNotifications&quot;:false,&quot;created&quot;:1532119173051,&quot;lastModifierId&quot;:null,&quot;lastModified&quot;:1532959627927,&quot;prefersExternalApplicationToHandleConsoleUrls&quot;:false,&quot;receivesDailyReports&quot;:false,&quot;receivesOwnReservationInvitations&quot;:false,&quot;autoApproveFrom&quot;:[],&quot;groups&quot;:[{&quot;id&quot;:&quot;d015d3c7-374d-407c-b628-aeaef84b17b5&quot;}],&quot;login&quot;:&quot;techsupport&quot;,&quot;homePage&quot;:null,&quot;features&quot;:[],&quot;defaultReportTemplateId&quot;:null,&quot;administeredDeviceGroups&quot;:[],&quot;timeZoneOffset&quot;:-25200000,&quot;isDisabled&quot;:false,&quot;userStatus&quot;:&quot;NO_ACTIVITY_LAST_MONTH&quot;}]}</response>
                            <responseType>text</responseType>
                            <structuredData>
&lt;structure xmlns:map=&quot;http://www.fnfr.com/svt/mapping&quot;&gt;
    &lt;statusCode value=&quot;200&quot;/&gt;
    &lt;requestHTTPHeaders map:nodetype=&quot;token&quot;&gt;
        &lt;Content_Type map:nodetype=&quot;token&quot;&gt;application/json&lt;/Content_Type&gt;
        &lt;X_Auth_Token map:nodetype=&quot;token&quot;&gt;eyJwYWNrZXQiOiAie1widXNlcl9uYW1lXCI6IFwiQmFyZmllbGQsIE1pa2VcIiwgXCJzdGFydF90aW1lXCI6IDE1MzYzNTExNzAsIFwiaWRcIjogXCJtYmFyZmllbGRcIiwgXCJleHBpcmF0aW9uXCI6IDE1MzY0Mzg3NzAsIFwiZG9tYWluXCI6IFwibGRhcFwifSIsICJzaWduYXR1cmUiOiAiNjQyNWYyNWZhZjYzYTZiMzIzZGVmMmRjMDA2Y2ZhY2RiMjJjZTcxMjJjOTZjYTcwYWQ0YjE1ZWQ3YTMzMDYwMzgyYWM2MTBhYjBhNzYxMDRhY2FkMmQ4MjFlYjMxYzczNWI2OTE2MGYyY2ZkZGFlODdiMzkxNTI3MmE2MzcxZmY2NzIzMzdiMjI5NWZiN2JlYjcyNjVjMjM5ZDUxNzU3MzljODE5NmNlMDk0M2Y0N2IzZjEwYzEyMzNhYTI4NDM2OTMyOTE4ZGExZTk1M2MwMDQ4MDFhNGRlYmNmYWQxYzY5NjI3NmQ4MjhiZGY3NzAwMmE1YWI4OTNkMDgxOTMxMDY2MTFhZmQwNjM5YTdkZmE3MjI2ZGJjN2VjYWE4NWMwNTM1OWI4MWYwOGI0MjdkOThlYjIwYTViMTI5ZDViYTg3NWUyMmVhMTY5YjA4M2U0ZmU1ODc2OTQyM2RhZDdhZDQxOTM1NDQwZjM0NDk1MTk4YzVlMjA1YzZiYjk5OTcyNzcyMmJjZjcyYjVkMDg5OWNlYjE4NzEzMDliNjBlNTlhNGU4N2RmOGIyZTRmMmY0NjRjYzc5ZWU3MDg4MDRlYTQ2NmM1MmNiNjVkMTRhYzZlOGZhM2FkMjUwMDczYWYwODZhODM4ZDI3M2M4NmU1OTM3NTFmZjk1ZDgxOTNkNjEifQ==&lt;/X_Auth_Token&gt;
    &lt;/requestHTTPHeaders&gt;
    &lt;requestRawText map:nodetype=&quot;token&quot;/&gt;
    &lt;responseHTTPHeaders map:nodetype=&quot;token&quot;&gt;
        &lt;Server map:nodetype=&quot;token&quot;&gt;nginx/1.10.3 (Ubuntu)&lt;/Server&gt;
        &lt;Cache_Control map:nodetype=&quot;token&quot;&gt;no-cache, no-store, must-revalidate&lt;/Cache_Control&gt;
        &lt;Cache_Control map:nodetype=&quot;token&quot;&gt;no-cache&lt;/Cache_Control&gt;
        &lt;Connection map:nodetype=&quot;token&quot;&gt;keep-alive&lt;/Connection&gt;
        &lt;Expires map:nodetype=&quot;token&quot;&gt;0&lt;/Expires&gt;
        &lt;Pragma map:nodetype=&quot;token&quot;&gt;no-cache&lt;/Pragma&gt;
        &lt;Content_Length map:nodetype=&quot;token&quot;&gt;2721&lt;/Content_Length&gt;
        &lt;Date map:nodetype=&quot;token&quot;&gt;Fri, 07 Sep 2018 20:33:42 GMT&lt;/Date&gt;
        &lt;Content_Type map:nodetype=&quot;token&quot;&gt;application/json&lt;/Content_Type&gt;
        &lt;X_Powered_By map:nodetype=&quot;token&quot;&gt;Undertow/1&lt;/X_Powered_By&gt;
    &lt;/responseHTTPHeaders&gt;
    &lt;responseRawText map:nodetype=&quot;token&quot;&gt;{&amp;quot;total&amp;quot;:4,&amp;quot;offset&amp;quot;:0,&amp;quot;count&amp;quot;:4,&amp;quot;profiles&amp;quot;:[{&amp;quot;id&amp;quot;:&amp;quot;43aabccc-ef9d-425c-a774-dbc050bc6ca4&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;Daniels, Les&amp;quot;,&amp;quot;description&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;autosetTimeZone&amp;quot;:true,&amp;quot;timeZoneId&amp;quot;:null,&amp;quot;role&amp;quot;:&amp;quot;SUPER_ADMIN&amp;quot;,&amp;quot;email&amp;quot;:&amp;quot;les.daniels@spirent.com&amp;quot;,&amp;quot;receivesEmailNotifications&amp;quot;:true,&amp;quot;created&amp;quot;:1532114571103,&amp;quot;lastModifierId&amp;quot;:null,&amp;quot;lastModified&amp;quot;:1532976915673,&amp;quot;prefersExternalApplicationToHandleConsoleUrls&amp;quot;:false,&amp;quot;receivesDailyReports&amp;quot;:true,&amp;quot;receivesOwnReservationInvitations&amp;quot;:false,&amp;quot;autoApproveFrom&amp;quot;:[],&amp;quot;groups&amp;quot;:[{&amp;quot;id&amp;quot;:&amp;quot;d015d3c7-374d-407c-b628-aeaef84b17b5&amp;quot;}],&amp;quot;login&amp;quot;:&amp;quot;ldaniels&amp;quot;,&amp;quot;homePage&amp;quot;:null,&amp;quot;features&amp;quot;:[],&amp;quot;defaultReportTemplateId&amp;quot;:null,&amp;quot;administeredDeviceGroups&amp;quot;:[],&amp;quot;timeZoneOffset&amp;quot;:-25200000,&amp;quot;isDisabled&amp;quot;:false,&amp;quot;userStatus&amp;quot;:&amp;quot;IDLE&amp;quot;},{&amp;quot;id&amp;quot;:&amp;quot;8dc3409e-901e-4a60-8701-985b1a433dfe&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;Efremov, Daniil&amp;quot;,&amp;quot;description&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;autosetTimeZone&amp;quot;:true,&amp;quot;timeZoneId&amp;quot;:null,&amp;quot;role&amp;quot;:&amp;quot;ADMIN&amp;quot;,&amp;quot;email&amp;quot;:null,&amp;quot;receivesEmailNotifications&amp;quot;:false,&amp;quot;created&amp;quot;:1533013661921,&amp;quot;lastModifierId&amp;quot;:null,&amp;quot;lastModified&amp;quot;:1533035108405,&amp;quot;prefersExternalApplicationToHandleConsoleUrls&amp;quot;:false,&amp;quot;receivesDailyReports&amp;quot;:false,&amp;quot;receivesOwnReservationInvitations&amp;quot;:false,&amp;quot;autoApproveFrom&amp;quot;:[],&amp;quot;groups&amp;quot;:[{&amp;quot;id&amp;quot;:&amp;quot;d015d3c7-374d-407c-b628-aeaef84b17b5&amp;quot;}],&amp;quot;login&amp;quot;:&amp;quot;defremov&amp;quot;,&amp;quot;homePage&amp;quot;:null,&amp;quot;features&amp;quot;:[],&amp;quot;defaultReportTemplateId&amp;quot;:null,&amp;quot;administeredDeviceGroups&amp;quot;:[],&amp;quot;timeZoneOffset&amp;quot;:-25200000,&amp;quot;isDisabled&amp;quot;:false,&amp;quot;userStatus&amp;quot;:&amp;quot;IDLE&amp;quot;},{&amp;quot;id&amp;quot;:&amp;quot;50946a4f-78f8-4011-96ad-3c82eb05b781&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;mbarfield&amp;quot;,&amp;quot;description&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;autosetTimeZone&amp;quot;:true,&amp;quot;timeZoneId&amp;quot;:null,&amp;quot;role&amp;quot;:&amp;quot;ADMIN&amp;quot;,&amp;quot;email&amp;quot;:&amp;quot;mike.barfield@spirent.com&amp;quot;,&amp;quot;receivesEmailNotifications&amp;quot;:true,&amp;quot;created&amp;quot;:1532019390871,&amp;quot;lastModifierId&amp;quot;:null,&amp;quot;lastModified&amp;quot;:1536351731501,&amp;quot;prefersExternalApplicationToHandleConsoleUrls&amp;quot;:false,&amp;quot;receivesDailyReports&amp;quot;:true,&amp;quot;receivesOwnReservationInvitations&amp;quot;:false,&amp;quot;autoApproveFrom&amp;quot;:[],&amp;quot;groups&amp;quot;:[{&amp;quot;id&amp;quot;:&amp;quot;d015d3c7-374d-407c-b628-aeaef84b17b5&amp;quot;}],&amp;quot;login&amp;quot;:&amp;quot;mbarfield&amp;quot;,&amp;quot;homePage&amp;quot;:null,&amp;quot;features&amp;quot;:[],&amp;quot;defaultReportTemplateId&amp;quot;:&amp;quot;4304cb5a-8a10-4731-ac1c-6d092bffac45&amp;quot;,&amp;quot;administeredDeviceGroups&amp;quot;:[],&amp;quot;timeZoneOffset&amp;quot;:-25200000,&amp;quot;isDisabled&amp;quot;:false,&amp;quot;userStatus&amp;quot;:&amp;quot;ACTIVE&amp;quot;},{&amp;quot;id&amp;quot;:&amp;quot;01a943d3-817e-4048-ab18-75d59ccf505f&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;Tech Support&amp;quot;,&amp;quot;description&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;autosetTimeZone&amp;quot;:true,&amp;quot;timeZoneId&amp;quot;:null,&amp;quot;role&amp;quot;:&amp;quot;ADMIN&amp;quot;,&amp;quot;email&amp;quot;:null,&amp;quot;receivesEmailNotifications&amp;quot;:false,&amp;quot;created&amp;quot;:1532119173051,&amp;quot;lastModifierId&amp;quot;:null,&amp;quot;lastModified&amp;quot;:1532959627927,&amp;quot;prefersExternalApplicationToHandleConsoleUrls&amp;quot;:false,&amp;quot;receivesDailyReports&amp;quot;:false,&amp;quot;receivesOwnReservationInvitations&amp;quot;:false,&amp;quot;autoApproveFrom&amp;quot;:[],&amp;quot;groups&amp;quot;:[{&amp;quot;id&amp;quot;:&amp;quot;d015d3c7-374d-407c-b628-aeaef84b17b5&amp;quot;}],&amp;quot;login&amp;quot;:&amp;quot;techsupport&amp;quot;,&amp;quot;homePage&amp;quot;:null,&amp;quot;features&amp;quot;:[],&amp;quot;defaultReportTemplateId&amp;quot;:null,&amp;quot;administeredDeviceGroups&amp;quot;:[],&amp;quot;timeZoneOffset&amp;quot;:-25200000,&amp;quot;isDisabled&amp;quot;:false,&amp;quot;userStatus&amp;quot;:&amp;quot;NO_ACTIVITY_LAST_MONTH&amp;quot;}]}&lt;/responseRawText&gt;
&lt;/structure&gt;
</structuredData>
                            <aliases>
                                <item name="isEmpty">
                                    <queryFormatString>.//isEmpty</queryFormatString>
                                </item>
                            </aliases>
                            <duration>0.7</duration>
                        </behavior>
                    </emulation>
                </item>
                <item guid="2333c09a-fe8d-4f36-8add-f7350c8fbcaa" action="eval" useFieldsInCommand="false">
                    <command>
                        <body>emailList = &quot;&quot;</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="cca17031-9297-46b2-a277-6f265414103b" action="for" useFieldsInCommand="false">
                    <command>
                        <body>email in emails:</body>
                    </command>
                    <nestedSteps>
                        <item guid="12185fb8-3265-43f8-9dfc-e500d030c39c" action="comment" useFieldsInCommand="false">
                            <command>
                                <body>list emails</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="92ab15aa-cae6-4b7d-900b-5f2f655dc020" action="if" useFieldsInCommand="false">
                            <command>
                                <body>email != &quot;&quot;:</body>
                            </command>
                            <nestedSteps>
                                <item guid="a6be2cfe-09b4-452d-9d87-c3b1e3b536d0" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>emailList = emailList + &quot;;&quot; + email</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="bafe94f9-2376-489c-9574-d63b937ca0b1" action="eval" useFieldsInCommand="false">
                    <command>
                        <body>emailList = emailList[1:]</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="979e6f67-936d-4554-8759-de0677e61900" action="eval" useFieldsInCommand="false">
                    <command>
                        <body>print(emailList)</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="9b2257e3-7232-4db1-ae0d-08cec39e5409" action="return">
                    <command>
                        <body>[emailList]</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
            </steps>
            <multilineDescription>Get emails based on valid user roles - e.g. ADMIN</multilineDescription>
            <arguments>
                <item name="role">
                    <description>Use a valid user role</description>
                    <defaultValue>ADMIN</defaultValue>
                </item>
                <item name="token">
                    <description>Token for REST authentication</description>
                    <isMandatory>true</isMandatory>
                </item>
            </arguments>
        </item>
        <item name="sendNotification">
            <steps>
                <item guid="a8742c79-47f9-4410-bc47-fafc35c790fb" action="from" session="email" skip="true">
                    <command>
                        <body>noreply.velocity@gmail.com</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <emulation>
                        <behavior>
                            <responseType>text</responseType>
                            <structuredData>
&lt;structure xmlns:map=&quot;http://www.fnfr.com/svt/mapping&quot;&gt;
    &lt;isEmpty&gt;true&lt;/isEmpty&gt;
&lt;/structure&gt;
</structuredData>
                            <aliases>
                                <item name="isEmpty">
                                    <queryFormatString>.//isEmpty</queryFormatString>
                                </item>
                            </aliases>
                            <duration>0.3</duration>
                        </behavior>
                    </emulation>
                </item>
                <item guid="4d34137c-2948-471d-a6f6-c1b7be680a7e" action="to" session="email" skip="true">
                    <command>
                        <body>[emailAddress]</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <emulation>
                        <behavior>
                            <responseType>text</responseType>
                            <structuredData>
&lt;structure xmlns:map=&quot;http://www.fnfr.com/svt/mapping&quot;&gt;
    &lt;isEmpty&gt;true&lt;/isEmpty&gt;
&lt;/structure&gt;
</structuredData>
                            <aliases>
                                <item name="isEmpty">
                                    <queryFormatString>.//isEmpty</queryFormatString>
                                </item>
                            </aliases>
                            <duration>0.1</duration>
                        </behavior>
                    </emulation>
                </item>
                <item guid="752989ad-be3a-4e6c-9c7c-c710564d4fde" action="subject" session="email" skip="true">
                    <command>
                        <body>New user logged in to Velocity notification</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <emulation>
                        <behavior>
                            <responseType>text</responseType>
                            <structuredData>
&lt;structure xmlns:map=&quot;http://www.fnfr.com/svt/mapping&quot;&gt;
    &lt;isEmpty&gt;true&lt;/isEmpty&gt;
&lt;/structure&gt;
</structuredData>
                            <aliases>
                                <item name="isEmpty">
                                    <queryFormatString>.//isEmpty</queryFormatString>
                                </item>
                            </aliases>
                        </behavior>
                    </emulation>
                </item>
                <item guid="c1808e1b-2277-4020-85d0-b3c70780bbd1" action="writeLine" session="email" skip="true">
                    <command>
                        <body>This is a notification to let you know user with this login id has logged into the system:</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <emulation>
                        <behavior>
                            <responseType>text</responseType>
                            <structuredData>
&lt;structure xmlns:map=&quot;http://www.fnfr.com/svt/mapping&quot;&gt;
    &lt;isEmpty&gt;true&lt;/isEmpty&gt;
&lt;/structure&gt;
</structuredData>
                            <aliases>
                                <item name="isEmpty">
                                    <queryFormatString>.//isEmpty</queryFormatString>
                                </item>
                            </aliases>
                            <duration>0.1</duration>
                        </behavior>
                    </emulation>
                </item>
                <item guid="c73019f7-e935-4025-818e-680e804b62e4" action="writeLine" session="email" skip="true">
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <emulation>
                        <behavior>
                            <responseType>text</responseType>
                            <structuredData>
&lt;structure xmlns:map=&quot;http://www.fnfr.com/svt/mapping&quot;&gt;
    &lt;isEmpty&gt;true&lt;/isEmpty&gt;
&lt;/structure&gt;
</structuredData>
                            <aliases>
                                <item name="isEmpty">
                                    <queryFormatString>.//isEmpty</queryFormatString>
                                </item>
                            </aliases>
                        </behavior>
                    </emulation>
                </item>
                <item guid="0de7513d-6239-4a39-9859-98b0475a5b70" action="writeLine" session="email" skip="true">
                    <command>
                        <body>[users]</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <emulation>
                        <behavior>
                            <responseType>text</responseType>
                            <structuredData>
&lt;structure xmlns:map=&quot;http://www.fnfr.com/svt/mapping&quot;&gt;
    &lt;isEmpty&gt;true&lt;/isEmpty&gt;
&lt;/structure&gt;
</structuredData>
                            <aliases>
                                <item name="isEmpty">
                                    <queryFormatString>.//isEmpty</queryFormatString>
                                </item>
                            </aliases>
                            <duration>0.1</duration>
                        </behavior>
                    </emulation>
                </item>
                <item guid="4b2a294a-ceee-4211-9d10-09738cc6664f" action="send" session="email" skip="true">
                    <postProcessing>
                        <analysisRules>
                            <item>
                                <extractorInfo extractorType="query">
                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                        <query>Result()</query>
                                    </extractorProperties>
                                </extractorInfo>
                                <processorInfo ruleType="assert">
                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                        <expression>value == &quot;Success&quot;</expression>
                                        <actionsWhenTrue>
                                            <item actionId="DeclareExecutionIssue">
                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                    <message>Email sent status, expected status &quot;Success&quot;, actual result [value]</message>
                                                </actionProperties>
                                            </item>
                                            <item actionId="PassTestIfNotAlreadyFailed">
                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                            </item>
                                        </actionsWhenTrue>
                                        <actionsWhenFalse>
                                            <item actionId="DeclareExecutionIssue">
                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                    <message>Email sent status, expected status &quot;Success&quot;, actual result [value]</message>
                                                </actionProperties>
                                            </item>
                                            <item actionId="FailTest">
                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                            </item>
                                        </actionsWhenFalse>
                                    </ruleProperties>
                                </processorInfo>
                                <skip>true</skip>
                            </item>
                        </analysisRules>
                    </postProcessing>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <emulation>
                        <behavior>
                            <response>Field_Name            Value                                                                         
----------------------------------------------------------------------------------------------------
Result                Success                                                                       
SMTP_Server           smtp.gmail.com                                                                
SMTP_User             spirentito.se@gmail.com                                                       
From                  noreply.velocity@gmail.com                                                    
To                    mike.barfield@spirent.com                                                     
CC                                                                                                  
BCC                                                                                                 
Subject               New user logged in to Velocity notification                                   
Attachment                                                                                          
Content-Type          text/plain                                                                    
</response>
                            <responseType>text</responseType>
                            <structuredData>
&lt;structure xmlns:map=&quot;http://www.fnfr.com/svt/mapping&quot;&gt;
    &lt;isEmpty&gt;false&lt;/isEmpty&gt;
    &lt;MailApplication&gt;
        &lt;Send map:nodetype=&quot;table&quot;&gt;
            &lt;Result map:endcol=&quot;29&quot; map:line=&quot;2&quot; map:nodetype=&quot;token&quot; map:startcol=&quot;22&quot;&gt;Success&lt;/Result&gt;
            &lt;SMTP_Server map:endcol=&quot;36&quot; map:line=&quot;3&quot; map:nodetype=&quot;token&quot; map:startcol=&quot;22&quot;&gt;smtp.gmail.com&lt;/SMTP_Server&gt;
            &lt;SMTP_User map:endcol=&quot;45&quot; map:line=&quot;4&quot; map:nodetype=&quot;token&quot; map:startcol=&quot;22&quot;&gt;spirentito.se@gmail.com&lt;/SMTP_User&gt;
            &lt;From map:endcol=&quot;48&quot; map:line=&quot;5&quot; map:nodetype=&quot;token&quot; map:startcol=&quot;22&quot;&gt;noreply.velocity@gmail.com&lt;/From&gt;
            &lt;To map:endcol=&quot;47&quot; map:line=&quot;6&quot; map:nodetype=&quot;token&quot; map:startcol=&quot;22&quot;&gt;mike.barfield@spirent.com&lt;/To&gt;
            &lt;CC map:endcol=&quot;22&quot; map:line=&quot;7&quot; map:nodetype=&quot;token&quot; map:startcol=&quot;22&quot;/&gt;
            &lt;BCC map:endcol=&quot;22&quot; map:line=&quot;8&quot; map:nodetype=&quot;token&quot; map:startcol=&quot;22&quot;/&gt;
            &lt;Subject map:endcol=&quot;65&quot; map:line=&quot;9&quot; map:nodetype=&quot;token&quot; map:startcol=&quot;22&quot;&gt;New user logged in to Velocity notification&lt;/Subject&gt;
            &lt;Attachment map:endcol=&quot;22&quot; map:line=&quot;10&quot; map:nodetype=&quot;token&quot; map:startcol=&quot;22&quot;/&gt;
            &lt;Content-Type map:endcol=&quot;32&quot; map:line=&quot;11&quot; map:nodetype=&quot;token&quot; map:startcol=&quot;22&quot;&gt;text/plain&lt;/Content-Type&gt;
        &lt;/Send&gt;
    &lt;/MailApplication&gt;
&lt;/structure&gt;
</structuredData>
                            <aliases>
                                <item name="isEmpty">
                                    <queryFormatString>.//isEmpty</queryFormatString>
                                </item>
                                <item name="Result">
                                    <queryFormatString>.//Send/Result</queryFormatString>
                                </item>
                                <item name="SMTP_Server">
                                    <queryFormatString>.//Send/SMTP_Server</queryFormatString>
                                </item>
                                <item name="SMTP_User">
                                    <queryFormatString>.//Send/SMTP_User</queryFormatString>
                                </item>
                                <item name="From">
                                    <queryFormatString>.//Send/From</queryFormatString>
                                </item>
                                <item name="To">
                                    <queryFormatString>.//Send/To</queryFormatString>
                                </item>
                                <item name="CC">
                                    <queryFormatString>.//Send/CC</queryFormatString>
                                </item>
                                <item name="BCC">
                                    <queryFormatString>.//Send/BCC</queryFormatString>
                                </item>
                                <item name="Subject">
                                    <queryFormatString>.//Send/Subject</queryFormatString>
                                </item>
                                <item name="Attachment">
                                    <queryFormatString>.//Send/Attachment</queryFormatString>
                                </item>
                                <item name="Content-Type">
                                    <queryFormatString>.//Send/Content-Type</queryFormatString>
                                </item>
                            </aliases>
                            <duration>0.1</duration>
                        </behavior>
                    </emulation>
                </item>
            </steps>
            <arguments>
                <item name="emailAddress">
                    <description>This is the list of email addresses. Comma seperate multiple emails</description>
                    <isMandatory>true</isMandatory>
                </item>
                <item name="users">
                    <description>New users that are added to the system</description>
                </item>
            </arguments>
        </item>
        <item name="sendSystemNotification">
            <steps>
                <item guid="e9725d2e-98f9-4bf1-9a6f-30fad710d748" action="comment" skip="true" useFieldsInCommand="false">
                    <command>
                        <body>debug add your userid to payload</body>
                    </command>
                    <nestedSteps>
                        <item guid="255e3038-58de-4e73-b9a0-c2ee8f7bf995" action="POST" session="velocity" estimatedStepExecutionTime="0.527">
                            <command>
                                <body>/velocity/api/message/v6/message</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="POST" httpMethod.inherit="false" action="/velocity/api/message/v6/message" action.inherit="false">
                                <message inherit="false">{
  &quot;html&quot;: false,
  &quot;userId&quot;: &quot;fdf02b6c-2bd7-4fc5-b480-4aa74e99a322&quot;,
  &quot;subject&quot;: &quot;New user access: [users]&quot;,
  &quot;message&quot;: &quot;New user has logged into the system and added to the demo pool&quot;,
  &quot;origin&quot;: &quot;Automated System Message&quot;
}</message>
                                <authentication transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.AuthenticationProperties" acceptAllCertificates="true" acceptAllCertificates.inherit="false"/>
                            </applicationProperties>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="84ba3f53-5011-4da7-8863-21ba434cf53d" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Send system message to admins</body>
                    </command>
                    <nestedSteps>
                        <item guid="b9bed4ea-b059-4b6f-836e-56ac0be52fe9" action="POST" session="velocity" estimatedStepExecutionTime="0.527">
                            <command>
                                <body>/velocity/api/message/v6/message</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="POST" httpMethod.inherit="false" action="/velocity/api/message/v6/message" action.inherit="false">
                                <message inherit="false">{
  &quot;html&quot;: false,
  &quot;userGroupId&quot;: &quot;[userGroupId]&quot;,
  &quot;subject&quot;: &quot;New user access: [users]&quot;,
  &quot;message&quot;: &quot;New user has logged into the system and added to the demo pool&quot;,
  &quot;origin&quot;: &quot;Automated System Message&quot;
}</message>
                                <authentication transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.AuthenticationProperties" acceptAllCertificates="true" acceptAllCertificates.inherit="false"/>
                            </applicationProperties>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
            </steps>
            <arguments>
                <item name="users">
                    <description>New users that are added to the system</description>
                    <isMandatory>true</isMandatory>
                </item>
                <item name="token">
                    <description>Authentication token</description>
                    <isMandatory>true</isMandatory>
                </item>
                <item name="userGroupId">
                    <description>Valid user group ID to send messages</description>
                    <isMandatory>true</isMandatory>
                </item>
            </arguments>
        </item>
    </procedures>
</testCase>
